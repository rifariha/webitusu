/**
 * lc_micro_slider.js - lightweight responsive slider with jquery.touchSwipe.js (or AlloyFinger) integration
 * Version: 1.3.2
 * Author: Luca Montanari aka LCweb
 * Website: http://www.lcweb.it
 * Licensed under the MIT license
 */

(function(c){var p=function(n,g){var e=c.extend({slide_fx:"fadeslide",slide_easing:"ease",nav_arrows:!0,nav_dots:!0,slideshow_cmd:!0,carousel:!0,touchswipe:!0,autoplay:!1,animation_time:700,slideshow_time:5E3,pause_on_hover:!0,loader_code:'<span class="lcms_loader"></span>'},g),k=c(n);k.data("lcms_vars",{slides:[],shown_slide:0,cached_img:[],uniqid:"",is_sliding:!1,is_playing:!1,paused_on_hover:!1});k.data("lcms_settings",e);var q=function(b,f,d){var l=b.data("lcms_vars"),g=b.data("lcms_settings"),
m=l.slides[d],h=m.img?"lcms_preload":"";g=m.img?g.loader_code:"";switch(f){case "init":var e="lcms_active_slide";break;case "fade":e="lcms_fadein";break;case "prev":e="lcms_before";break;case "next":e="lcms_after"}b.find(".lcms_nav_dots span").removeClass("lcms_sel_dot");b.find(".lcms_nav_dots span").eq(d).addClass("lcms_sel_dot");f=m.img?'<div class="lcms_bg" style="background-image: url('+m.img+');"></div>':"";var k=c.trim(m.content)?'<div class="lcms_content">'+m.content+"</div>":"";h='<div class="lcms_slide '+
e+" "+h+'" rel="'+d+'"><div class="lcms_inner '+m.classes+'">'+f+k+"</div>"+g+"</div>";b.find(".lcms_container").append(h);m.img&&(-1===c.inArray(m.img,l.cached_img)?c("<img/>").bind("load",function(){l.cached_img.push(this.src);c(".lcms_slide[rel="+d+"]").removeClass("lcms_preload");c(".lcms_slide[rel="+d+"]").find("> *").not(".lcms_inner").fadeOut(300,function(){c(this).remove()});b.trigger("lcms_slide_shown",[d,m]);c(".lcms_slide[rel="+d+"]").hasClass("lcms_active_slide")&&b.trigger("lcms_initial_slide_shown",
[d,m])}).attr("src",m.img):(c(".lcms_slide[rel="+d+"]").removeClass("lcms_preload").addClass("lcms_cached"),c(".lcms_slide[rel="+d+"]").find("> *").not(".lcms_inner").remove(),b.trigger("lcms_slide_shown",[d,m])));1<l.slides.length&&(h=d<l.slides.length-1?d+1:0,-1===c.inArray(l.slides[h].img,l.cached_img)&&c("<img/>").bind("load",function(){l.cached_img.push(this.src)}).attr("src",l.slides[h].img));2<l.slides.length&&(h=d?d-1:l.slides.length-1,-1===c.inArray(l.slides[h].img,l.cached_img)&&c("<img/>").bind("load",
function(){l.cached_img.push(this.src)}).attr("src",l.slides[h].img))};lcms_slide=function(b,c){var d=b.data("lcms_vars"),f=b.data("lcms_settings");if("undefined"==typeof d)return!0;var g=f.animation_time,e=d.shown_slide;if(!f.carousel&&("prev"==c&&!d.shown_slide||"next"==c&&d.shown_slide==d.slides.length-1)||d.lcms_is_sliding||1==d.slides.length||"number"==typeof c&&(0>c||c>d.slides.length-1))return!1;if("prev"==c)var h=0===e?d.slides.length-1:e-1;else"next"==c?h=e==d.slides.length-1?0:e+1:(h=c,
c=h>e?"next":"prev");d.lcms_is_sliding=!0;b.addClass("lcms_is_sliding lcms_moving_"+c);b.find(".lcms_active_slide").addClass("lcms_prepare_for_"+c);q(b,"fade"==f.slide_fx?"fade":c,h);d.shown_slide=h;b.trigger("lcms_changing_slide",[h,d.slides[h],e]);f.carousel||(b.find(".lcms_prev, .lcms_next, .lcms_play > span").removeClass("lcms_disabled_btn"),h?h==d.slides.length-1&&b.find(".lcms_next, .lcms_play > span").addClass("lcms_disabled_btn"):b.find(".lcms_prev").addClass("lcms_disabled_btn"));setTimeout(function(){b.find(".lcms_active_slide").remove();
d.lcms_is_sliding=!1;b.removeClass("lcms_is_sliding lcms_moving_"+c);b.find(".lcms_slide").removeClass("lcms_fadein lcms_before lcms_after").addClass("lcms_active_slide");b.trigger("lcms_new_active_slide",[h,d.slides[h]])},g)};c(".lcms_prev").unbind("click");k.delegate(".lcms_play","click",function(){var b=c(this).parents(".lcms_wrap").parent(),f=b.data("lcms_vars");jQuery(this).hasClass("lcms_pause")?(f.paused_on_hover&&(f.paused_on_hover=!1),b.lcms_stop_slideshow()):b.lcms_start_slideshow()});c(".lcms_prev").unbind("click");
k.delegate(".lcms_prev:not(.lcms_disabled)","click",function(){var b=c(this).parents(".lcms_wrap").parent();"undefined"!=typeof lcms_one_click&&clearTimeout(lcms_one_click);lcms_one_click=setTimeout(function(){b.lcms_stop_slideshow();lcms_slide(b,"prev")},5)});c(".lcms_next").unbind("click");k.delegate(".lcms_next:not(.lcms_disabled)","click",function(){var b=c(this).parents(".lcms_wrap").parent();"undefined"!=typeof lcms_one_click&&clearTimeout(lcms_one_click);lcms_one_click=setTimeout(function(){b.lcms_stop_slideshow();
lcms_slide(b,"next")},5)});c(".lcms_next").unbind("click");k.delegate(".lcms_nav_dots span:not(.lcms_sel_dot)","click",function(){var b=c(this).parents(".lcms_wrap").parent(),f=parseInt(jQuery(this).attr("rel"));"undefined"!=typeof lcms_one_click&&clearTimeout(lcms_one_click);lcms_one_click=setTimeout(function(){b.lcms_stop_slideshow();lcms_slide(b,f)},5)});var p=function(){"function"==typeof c.fn.swipe?k.find(".lcms_wrap").swipe({swipeRight:function(){var b=jQuery(this).parent();b.lcms_stop_slideshow();
lcms_slide(b,"prev")},swipeLeft:function(){var b=jQuery(this).parent();b.lcms_stop_slideshow();lcms_slide(b,"next")},threshold:40,allowPageScroll:"vertical"}):"function"==typeof AlloyFinger&&new AlloyFinger(k.find(".lcms_wrap")[0],{swipe:function(b){var c=jQuery(this).parent();c.lcms_stop_slideshow();"Right"===b.direction?lcms_slide(c,"prev"):"Left"===b.direction&&lcms_slide(c,"next")}})};e.pause_on_hover&&k.delegate(".lcms_wrap","mouseenter",function(){var b=c(this).parent(),f=b.data("lcms_vars");
b.data("lcms_settings");f.is_playing&&(f.paused_on_hover=!0,b.lcms_stop_slideshow())}).delegate(".lcms_wrap","mouseleave",function(){var b=c(this).parent(),f=b.data("lcms_vars");b.data("lcms_settings");f.paused_on_hover&&(b.lcms_start_slideshow(),f.paused_on_hover=!1)});(function(b){var f=b.data("lcms_vars"),d=b.data("lcms_settings");b.find("li").each(function(b,d){c(this).find("noscript").remove();var e={content:c(this).html(),img:c(this).attr("lcms_img"),classes:"undefined"==typeof c(this).attr("class")?
"":c(this).attr("class")};f.slides.push(e)});f.uniqid="lcms_"+Math.floor(1E6*Math.random())+(new Date).getMilliseconds();b.html('<div class="lcms_wrap '+f.uniqid+'"><div class="lcms_container"></div></div>');f.shown_slide=0;q(b,"init",0);if(d.nav_arrows&&1<f.slides.length){var e=d.carousel?"":"lcms_disabled_btn";b.find(".lcms_wrap").addClass("lcms_has_nav_arr").prepend('<div class="lcms_nav"><span class="lcms_prev '+e+'"></span><span class="lcms_next"></span></div>')}d.slideshow_cmd&&1<f.slides.length&&
b.find(".lcms_wrap").addClass("lcms_has_ss_cmd").prepend('<div class="lcms_play"><span></span></div>');if(d.nav_dots&&1<f.slides.length){e='<div class="lcms_nav_dots">';for(a=0;a<f.slides.length;a++)e+='<span rel="'+a+'"></span>';b.find(".lcms_wrap").addClass("lcms_has_nav_dots").prepend(e+"</div>");b.find(".lcms_nav_dots span").first().addClass("lcms_sel_dot")}d.slide_fx&&"none"!=d.slide_fx&&(e=d.slide_easing&&"ease"!=d.slide_easing?"-webkit-animation-timing-function: "+d.slide_easing+" !important;animation-timing-function: "+
d.slide_easing+" !important;":"",c("head").append('<style type="text/css">.'+f.uniqid+" .lcms_before,."+f.uniqid+" .lcms_after,."+f.uniqid+" .lcms_prepare_for_prev,."+f.uniqid+" .lcms_prepare_for_next {-webkit-animation-duration: "+d.animation_time+"ms !important;animation-duration: "+d.animation_time+"ms !important;"+e+"}</style>"),b.find(".lcms_wrap").addClass("lcms_"+d.slide_fx+"_fx"));d.autoplay&&b.lcms_start_slideshow();b.trigger("lcms_ready");c(document).ready(function(b){"function"!=typeof c.fn.swipe&&
"function"!=typeof AlloyFinger||p()})})(k);return this};c.fn.lc_micro_slider=function(n){c.fn.lcms_destroy=function(){var g=c(this);g.find(".lcms_wrap").remove();var e=g.data("lcms_vars");e.is_playing&&clearInterval(e.is_playing);g.find(".lcms_next, .lcms_prev").undelegate("click");g.removeData("lcms_vars");g.removeData("lcms_settings");g.removeData("lc_micro_slider");return!0};c.fn.lcms_paginate=function(g){var e=c(this),k=e.data("lcms_vars");e.data("lcms_settings");if("undefined"==typeof k)return console.error("cannot paginate - element not initialized"),
!0;e.lcms_stop_slideshow();lcms_slide(e,g);return!0};c.fn.lcms_start_slideshow=function(){var g=c(this),e=g.data("lcms_vars"),k=g.data("lcms_settings");if("undefined"==typeof e)return console.error("cannot start slideshow - element not initialized"),!0;e.is_playing=setInterval(function(){lcms_slide(g,"next")},k.slideshow_time+k.animation_time);g.find(".lcms_play").addClass("lcms_pause");g.trigger("lcms_play_slideshow");return!0};c.fn.lcms_stop_slideshow=function(){var g=c(this),e=g.data("lcms_vars");
g.data("lcms_settings");if("undefined"==typeof e)return console.error("cannot stop slideshow - element not initialized"),!0;clearInterval(e.is_playing);e.is_playing=null;e.paused_on_hover||g.find(".lcms_play").removeClass("lcms_pause");g.trigger("lcms_stop_slideshow");return!0};return this.each(function(){if(c(this).data("lc_micro_slider"))return c(this).data("lc_micro_slider");var g=new p(this,n);c(this).data("lc_micro_slider",g)})}})(jQuery);